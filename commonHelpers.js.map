{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst fetchFromPixabay = async (searchStr, page = 1) => {\n    const API_KEY = \"43468244-0e08b5bd3673b3a8f95726aef\";\n    const url = \"https://pixabay.com/api/\";\n\n    const params = {\n        key: API_KEY,\n        q: searchStr,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page\n    };\n\n    const response = await axios({ url, params });\n    return response.data;\n\n};\n\nexport default fetchFromPixabay;","const makeGallery = ((arr) => {\n    return arr\n        .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                />\n            </a>\n            <ul class=\"gallery-txt-list\">\n                <li class=\"gallery-txt-item\">\n                    <p class=\"txt-title\">Likes</p>\n                    <p class=\"txt-value\">${likes}</p>\n                </li>\n                <li class=\"gallery-txt-item\">\n                    <p class=\"txt-title\">Views</p>\n                    <p class=\"txt-value\">${views}</p>\n                </li>\n                <li class=\"gallery-txt-item\">\n                    <p class=\"txt-title\">Comments</p>\n                    <p class=\"txt-value\">${comments}</p>\n                </li>\n                <li class=\"gallery-txt-item\">\n                    <p class=\"txt-title\">Downloads</p>\n                    <p class=\"txt-value\">${downloads}</p>\n                </li>\n            </ul>\n        </li>`\n    )\n    .join('');\n});\nexport default makeGallery;","import makeFetch from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport makeGallery from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".search-form\");\nconst galleryContainer = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox(\".gallery a\", { \n    overlayOpacity: 0.8,\n    captionsData: \"alt\",\n    captionDelay: 250\n});\nconst loader = document.querySelector(\".loader\");\nconst moreBtn = document.querySelector(\".more-btn\");\nconst searchInput = document.querySelector(\".search-input\");\nloader.style.display = \"none\";\nmoreBtn.style.display = \"none\";\nlet searchString = \"\";\nlet page = 1;\n\nform.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    searchString = event.target.elements.search.value.trim();\n    if (searchString === \"\") {\n        return;\n    }\n    loader.style.display = \"block\";\n    galleryContainer.innerHTML = \"\";\n    page = 1;\n    makeAndRefresh(page);\n})\n\nmoreBtn.addEventListener(\"click\", () => {\n    page++;\n    makeAndRefresh(page);\n})\n\nsearchInput.addEventListener(\"click\", event => {\n    event.target.value = \"\";\n})\n\nfunction makeAndRefresh(page) {\n    makeFetch(searchString, page)\n        .then(data => {\n            if (data.total == 0) {\n                iziToast.show(createMsg());\n                return;\n            }\n            galleryContainer.insertAdjacentHTML('beforeend', makeGallery(data.hits));\n            lightbox.refresh();\n            scroll();\n            if (Math.floor(data.totalHits / page) < 15) {\n                iziToast.show(createMsg(\"We're sorry, but you've reached the end of search results.\"));\n                moreBtn.style.display = \"none\";\n            } else {\n                moreBtn.style.display = \"block\";\n            }\n        })\n        .catch(error => {\n            iziToast.show(createMsg(error.message));\n        })\n        .finally(() => {\n            loader.style.display = \"none\";\n        });\n}\n\nfunction createMsg(msg = \"\") {\n    return {\n        message: msg == \"\" ? \"Sorry, there are no images matching your search query. Please try again!\" : msg,\n        messageColor: '#fff',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n    }\n}\n\nfunction scroll() {\n    const item = document.querySelector(\".gallery-item\");\n    window.scrollBy({\n        top: 250 * 2 + 24 * 2,\n        left: 0,\n        behavior: \"smooth\",\n    });\n}\n"],"names":["fetchFromPixabay","searchStr","page","axios","makeGallery","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","galleryContainer","lightbox","SimpleLightbox","loader","moreBtn","searchInput","searchString","event","makeAndRefresh","makeFetch","data","iziToast","createMsg","scroll","error","msg"],"mappings":"owBACA,MAAMA,EAAmB,MAAOC,EAAWC,EAAO,KAc7B,MAAMC,EAAM,CAAE,IAZnB,2BAYwB,OAVrB,CACX,IAJY,qCAKZ,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACd,CAEgD,CAAA,GAC5B,KChBdE,EAAgBC,GACXA,EACF,IACH,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,4CAEgCL,CAAa;AAAA;AAAA;AAAA,uBAGlCD,CAAY;AAAA,uBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAMgBC,CAAK;AAAA;AAAA;AAAA;AAAA,2CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,2CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,2CAIRC,CAAS;AAAA;AAAA;AAAA,cAI/C,EACA,KAAK,EAAE,ECjCNC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,eAAgB,GAChB,aAAc,MACd,aAAc,GAClB,CAAC,EACKC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAc,SAAS,cAAc,eAAe,EAC1DF,EAAO,MAAM,QAAU,OACvBC,EAAQ,MAAM,QAAU,OACxB,IAAIE,EAAe,GACflB,EAAO,EAEXW,EAAK,iBAAiB,SAAUQ,GAAS,CACrCA,EAAM,eAAc,EACpBD,EAAeC,EAAM,OAAO,SAAS,OAAO,MAAM,OAC9CD,IAAiB,KAGrBH,EAAO,MAAM,QAAU,QACvBH,EAAiB,UAAY,GAC7BZ,EAAO,EACPoB,EAAepB,CAAI,EACvB,CAAC,EAEDgB,EAAQ,iBAAiB,QAAS,IAAM,CACpChB,IACAoB,EAAepB,CAAI,CACvB,CAAC,EAEDiB,EAAY,iBAAiB,QAASE,GAAS,CAC3CA,EAAM,OAAO,MAAQ,EACzB,CAAC,EAED,SAASC,EAAepB,EAAM,CAC1BqB,EAAUH,EAAclB,CAAI,EACvB,KAAKsB,GAAQ,CACV,GAAIA,EAAK,OAAS,EAAG,CACjBC,EAAS,KAAKC,EAAS,CAAE,EACzB,MACH,CACDZ,EAAiB,mBAAmB,YAAaV,EAAYoB,EAAK,IAAI,CAAC,EACvET,EAAS,QAAO,EAChBY,IACI,KAAK,MAAMH,EAAK,UAAYtB,CAAI,EAAI,IACpCuB,EAAS,KAAKC,EAAU,4DAA4D,CAAC,EACrFR,EAAQ,MAAM,QAAU,QAExBA,EAAQ,MAAM,QAAU,OAExC,CAAS,EACA,MAAMU,GAAS,CACZH,EAAS,KAAKC,EAAUE,EAAM,OAAO,CAAC,CAClD,CAAS,EACA,QAAQ,IAAM,CACXX,EAAO,MAAM,QAAU,MACnC,CAAS,CACT,CAEA,SAASS,EAAUG,EAAM,GAAI,CACzB,MAAO,CACH,QAASA,GAAO,GAAK,2EAA6EA,EAClG,aAAc,OACd,gBAAiB,UACjB,SAAU,UACb,CACL,CAEA,SAASF,GAAS,CACD,SAAS,cAAc,eAAe,EACnD,OAAO,SAAS,CACZ,IAAK,IAAM,EAAI,GAAK,EACpB,KAAM,EACN,SAAU,QAClB,CAAK,CACL"}